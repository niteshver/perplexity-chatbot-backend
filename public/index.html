<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chatbot</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background:#f0f0f0; }
  #chat { max-width: 600px; margin: auto; }
  #messages { border: 1px solid #ccc; height: 400px; overflow-y: scroll; padding: 10px; background:#fff; }
  .msg { margin: 5px 0; padding: 10px; border-radius: 5px; }
  .user { background:#007bff; color:#fff; margin-left:auto; }
  .bot { background:#eee; color:#000; margin-right:auto; }
</style>
</head>
<body>
<h2>Chat with AI</h2>
<div id="chat">
<div id="messages"></div>
<input type="text" id="input" placeholder="Type message" />
<button onclick="send()">Send</button>
</div>
<script>
const messagesDiv = document.getElementById('messages');
const input = document.getElementById('input');

function addMessage(text, className) {
  const div = document.createElement('div');
  div.className = 'msg ' + className;
  div.innerText = text;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

async function send() {
  const msg = input.value;
  addMessage(msg, 'user');
  input.value = '';
  try {
    const res = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: msg, history: [] })
    });
    const data = await res.json();
    addMessage(data.response, 'bot');
  } catch(e) {
    addMessage('Error:', 'bot');
  }
}
</script>
</body>
</html>
